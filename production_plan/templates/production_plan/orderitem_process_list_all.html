{% extends 'base/base.html' %}

{% block title %}工程展開一覧{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1 class="mb-4">工程展開一覧（未着手）</h1>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>受注No</th>
                <th>製品名</th>
                <th>工程順序</th>
                <th>工程名</th>
                <th>予定開始</th>
                <th>状態</th>
                <th>完了</th>
                <th>作業日設定</th>
                <th>工程別日付一覧</th>
            </tr>
        </thead>
        <tbody>
            {% for p in processes %}
                <tr>
                    <td>{{ p.order_item.order.order_number }}</td>
                    <td>{{ p.order_item.product }}</td>
                    <td>{{ p.sequence }}</td>
                    <td>{{ p.process.name }}</td>
                    <td>{{ p.planned_start }}</td>
                    <td>{{ p.status }}</td>
                    <td>{{ p.is_completed }}</td>
                    <td><a href="{% url 'production_plan:orderitem_process_plan' pk=p.order_item.pk %}" class="btn btn-sm btn-primary">
                            日付設定
                        </a>
                    </td>
                    <td>
                        <a href="{% url 'production_plan:process_date_list' pk=p.process.pk %}" class="btn btn-sm btn-info">
                            スケジュール日付を見る
                        </a>
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="7" class="text-center text-muted">工程データがまだ登録されていません</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <a href="{% url 'orders:order_list' %}" class="btn btn-secondary">一覧へ戻る</a>
</div>
{% endblock %}